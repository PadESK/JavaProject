-- phpMyAdmin SQL Dump
-- version 4.5.5.1
-- http://www.phpmyadmin.net
--
-- Client :  127.0.0.1
-- Généré le :  Jeu 02 Juin 2016 à 23:02
-- Version du serveur :  5.7.11
-- Version de PHP :  5.6.19

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;


-- Base de données :  `jpublankproject`

CREATE DATABASE `jpublankproject` ;

USE `jpublankproject` ;

DELIMITER //
--
-- Procédures
--
CREATE 
	DEFINER=`root`@`localhost` 
	PROCEDURE MapByID (IN p_id VARCHAR(2))  
	READS SQL DATA
	SQL SECURITY INVOKER
	BEGIN
		SELECT * FROM map WHERE id = p_id;
	END//

CREATE 
	DEFINER=`root`@`localhost` 
	PROCEDURE MapByKey (IN p_key VARCHAR(5))  
	READS SQL DATA
	SQL SECURITY INVOKER
	BEGIN
		SELECT * FROM jpublankproject2.map where key=p_key;
	END//

CREATE
	DEFINER= 'root'@'localhost'
	PROCEDURE InsertScoreByKeymap (IN score INT, key_map VARCHAR(5))  
	MODIFIES SQL DATA 
	BEGIN
		INSERT INTO Map(best_score)
		WHERE key = key_map
		VALUES (score);
	END//

DELIMITER ;


-- --------------------------------------------------------


-- Structure de la table MAP

CREATE TABLE Map (
	id INT NOT NULL,
	key VARCHAR(5) NOT NULL,
	mapContent TEXT NOT NULL,
	best_score INT,
	PRIMARY KEY (id) 
	) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Structure de la table PLAYER
/*
CREATE TABLE Player (
	idplayer BIGINT NOT NULL,
	score BIGINT NOT NULL,
	level BIGINT NOT NULL,
    	PRIMARY KEY (idplayer)
	) ENGINE=InnoDB DEFAULT CHARSET=latin1;
*/
-- Insertion dans la table map

INSERT INTO Map ( idmap, maplevel, File) VALUES
	(		
		1, 'map1', 
		'NNNNNNBHBHHHHHHHHHBN
NNNBHHBPVNNNNNNNNNBB
NNNVNPNNVNNNNNNNNNNV
BHHBNNNNVNNNPNNNNNNV
VNPNBHHHBHHHHHBNNNNB
VPNNP1NNNNNNONNNNNSD
VNPNBHHHBHHHHHBNNNNB
BHHBNNNNVNNNPNNNNNNV
NNNVNPNNVNNNNNNNNNNV
NNNBHHBPVNNNNNNNNNBB
NNNNNNBHBHHHHHHHHHBN
NNNNNNNNNNNNNNNNNNNN'),

	(		
		2, 'map2',
		'BHHHHBNNBHHBNNBHHHHB
VNPNNVNNVNNVNNVNNNNV
VPOPNBHHBNNBHHBNPPNV
VNPNNNNNNNNNNNNNNNNV
BHHHHBNNBHHHHHBNBHHB
NNNNNVNNNNNNNPVNVNNN
BHHHHBNNBHHHHHBNBHHB
V4NN1NNNVNNNNNNNNNNV
VNPNNBHHBNNBHHBNNNNV
VNDPNVNNVNNVNNVNNSNV
V2NN3VNNVPPVNNVNNNNV
BHHHHBNNBHHBNNBHHHHB'),

	(		
		3, 'map3', 
		'BHHHHHBHHHHHBHHHHHHB
VPPPNNVN2NNNBNNN1NNV
VNNNNNVNNNNNNNNNNNNV
BHBNBHBHBNBHBHHBNBHB
VNNNNNBNNNNNBNNNNNNV
VNN4NNDNNNNNBNNNPNNV
VNNNNNBNNNNNBNNNNNNV
BHBNBHBHBNBHBHHBNBHB
VNNNNNNNNNNNVNNNNNNV
VNNNNNBNN3NNVNNNNNNV
VONNNNVNNNNNVNNNNNNV
BHHHHHBHHHHHBHHHHHHB'),

	(		
		4, 'map4', 
		'NNNNBHBNNNBHBNNNNBHB
NBHHBPBHHHBPBHHHHBPV
NVNNNNNNNNNNNNNNNNNV
NVNBHHHBNBHHHBHHHBNV
NVNVNNNVNVNNNVNNNBNV
NVNVNNNVNVNNNVNNNNNV
NVNVNNNVNVNNNVNBNNNV
BBNBBNBBNBBNBBNBBBNV
V1N3VNVNNNVNVNNNVNNV
VNONVNVNPNVNVNDNVNSV
V2N4VNVNNNVNVNNNVNNV
BHHHBNBHHHBNBHHHBHHB'),
	(
		5, 'map5',
		'BHHHHHHHHHHHHHHHHHHB
V4NNNNNNNNNNNNNNNNNV
BHBDBHBNNNNNNNBHBPBB
NNNNNNVBPBBBPBVNBHBN
NNNNNNVNNNSNNNVNNNNN
NNNNNNVNNNNNNNVNNNNN
NNNNNNVBPBBBPBVNBHBN
NNBHBNVNNNBNNNVNV3VN
BHBOBHBNNNVNNNBHBNBB
VNNNNNNNNNVNNNNNNNNV
V2NNNNNNNNVNNNNNNNPV
BHHHHHHHHHBHHHHHHHHB');




/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
